'use strict'

const request = require('../utils/request')

class Analytics {
  constructor({ org, api }) {
    this.api = api
    this.org = org
  }

  async publish(eventName, eventData) {
    eventData.shell = true
    try {
      await request({
        accessKey: this.org.accessKey,
        method: 'POST',
        body: {
          eventName,
          eventData
        },
        endpoint: `/orgs/${this.org.orgName}/analytics`
      })
    } catch (e) {
      if (process.env.SLS_DEBUG) {
        console.error(e)
      }
    }
  }
}

module.exports = Analytics
