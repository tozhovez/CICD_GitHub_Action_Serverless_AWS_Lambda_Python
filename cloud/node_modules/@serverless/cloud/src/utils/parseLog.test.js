const parseLog = require('./parseLog')
const log = jest.spyOn(console, 'log')

test.each([
  {
    description: 'multiple lines',
    input:
      "'a very long line with\\n' +\n" +
      "  'some line breaks\\n' +\n" +
      "  'that is much longer than the optimum\\n' +\n" +
      "  'console width and - contains dashes'",
    expected:
      'a very long line with\nsome line breaks\nthat is much longer than the optimum\nconsole width and - contains dashes'
  },
  {
    description: 'inspected object',
    input: "{ some: 'object' }",
    expected: "{ some: 'object' }"
  },
  {
    description: 'a string with dashes',
    input: "'some-string'",
    expected: 'some-string'
  },
  {
    description: 'malicious content',
    input: "function(){console.log('whoa')}()",
    expected: "function(){console.log('whoa')}()"
  }
])('handles $description', ({ input, expected }) => {
  const output = parseLog(input)
  expect(output).toEqual(expected)
  expect(log).not.toBeCalled()
})
