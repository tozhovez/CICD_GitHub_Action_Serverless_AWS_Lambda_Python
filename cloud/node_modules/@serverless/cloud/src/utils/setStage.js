'use strict'

module.exports = () => {
  if (!process.env.SERVERLESS_CLOUD_ENDPOINT) {
    const stage = process.env.CLOUD_STAGE

    process.env.SERVERLESS_CLOUD_ENDPOINT =
      stage === 'prod' || stage === undefined
        ? 'https://api.cloud.serverless.com'
        : `https://${stage === 'dev' ? 'api' : stage}.cloud.serverless-dev.com`
  }

  if (!process.env.SERVERLESS_PLATFORM_STAGE) {
    process.env.SERVERLESS_PLATFORM_STAGE =
      process.env.SERVERLESS_CLOUD_ENDPOINT.indexOf('serverless.com') === -1 ? 'dev' : 'prod'
  }
}
